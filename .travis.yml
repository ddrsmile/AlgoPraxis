language: python
python:
    - "3.8"

install:
    - pip install -r requirements.txt
    - pip install coverage
script:
    - python manage.py makemigrations 'tests' --settings project.settings.testing
    - coverage run --source 'api' --omit '*/migrations/*'  manage.py test api -v 0 --settings project.settings.testing --noinput
    - coverage report -m